# Heapsort 
Heapsort's running time is O(n log n) and sorts in place: only a constant number of array elements are stored outside the input array at any time.

This combines the better aspects of merge sort(run time) and insertion sort(space).

*Heap* is was originally used as "garbage-collected storage" but in this context a *heap data structure* is not garbage-collected storage. 

## Heaps
The (binary) *heap* data structure:
- an array
- can view as a nearly complete binary tree

Parent(i)
return[i/2]

Left(i)
return 2i

Right(i)
return 2i + 1

Good implementations of heapsort often implement these procedures as "macros" or "in-line" procedures.

2 Kinds of Binary Heaps:
- Max-Heaps: the max heap property is that for every node i the value is at most the value of its parent.       
- Min-Heaps: the min heap property is that for every node i the value is more than the value of its parent. The smallest element is at the root.
Both: the values in the nodes satisfy a *heap property*

For a heapsort algo - Max-heaps are used. 

The *height* of heap of n elements is O(log n)

Exercises:

1.1 - Between 2^n and (2^n+1) -1
1.2 2^height, (2^height + 1) - 1

## Maintaining the Heap Property
In order to maintain the max-heap property we call procedure *MAX-HEAPIFY* 

```
MAX-HEAPIFY(A, i)
    l = LEFT(i)
    r = RIGHT(i)
    if l <_ A.heap-size and A[l] and A[i]
        largest = l
    else 
        largest = i
    if r <_ A.heap-size and A[r] > A[largest]
        largest = r
    if largest != i
        exchange A[i] with A[largest]
        MAX-HEAPIFY(A,largest)
```

This will float down the smaller numbers towards the bottom of the heap.

Runtime - T(n) <_ T(2n/3) + 0(1) or alternatively runtime on a node of height h as O(h)

Exercises
2.1 - on paper
2.2 
```
MIN-HEAPIFY(A, i)
    l = LEFT(i)
    r = RIGHT(i)
    if l <_ A.heap-size and A[l] <> A[i]
        smallest = l
    else 
        smallest = i
    if r <_ A.heap-size and A[r] < A[i]
        smallest = r
    if smallest != i
        exchange A[i] with A[smallest]
        MIN-HEAPIFY(A,smallest)
```
Same runtime

2.3: No effect - A[i] is root and the procedure ends
## Building a Heap

## The Heapsort Algorithm

## Priority queues
